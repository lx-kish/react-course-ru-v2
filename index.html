<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
  <title>React [RU] tutorial</title>
  <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
  
  <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
  
  <script src="https://unpkg.com/prop-types@15.6/prop-types.js"></script>
  
  <style>
	.none {
		display: none;
	}
	
	body {
		background: rgba(0, 102, 255, 0.38);
		font-family: sans-serif;
	}
	
	p {
		margin: 0 0 5px;
	}
	
	.article {
		background: #FFF;
		border: 1px solid rgba(0, 89, 181, 0.82);
		width: 600px;
		margin: 0 0 5px;
		box-shadow: 2px 2px 5px -1px rgb(0, 81, 202);
		padding: 3px 5px';
	}
	
	.news__author {
		text-decoration: underline;
		color: #007DDC;
	}
	
	.news__count {
		margin: 10px 0 0 0;
		display: block;
	}
  </style>
</head>

<body>
  <div id="root"></div>
  <script type="text/babel">
	
	const myNews = [
		{
			id: 1,
			author: 'Alex Pechkin',
			text: 'On thursday, ...',
			bigText: 'The first awesome news'
		},
		{
			id: 2,
			author: 'Just Vasya',
			text: 'I suggest $ should cost 35 rubles!',
			bigText: 'The second awesome news'
		},
		{
			id: 3,
			author: 'Max Frontend',
			text: '2 years past since the previous versions of books, but $ still does not cost 35',
			bigText: 'The third awesome news'
		},
		{
			id: 4,
			author: 'Guest',
			text: 'No sms, free of charge, about react, visit - https://maxpfrontend.ru',
			bigText: 'The fourth awesome news'
		}
	];
	
	class Article extends React.Component {
	
		state = {
			visible: false
		}
		
		handleReadMoreClick = (e) => {
			e.preventDefault()
			this.setState({ visible: true })
		}
		
		render() {
			const { author, text, bigText } = this.props.data
			const { visible } = this.state

			return (
				<div className="article">
					<p className="news__author">{author}:</p>
					<p className="news__text">{text}</p>
					{
						!visible && <a onClick={this.handleReadMoreClick} href="a" className="news__readmore">Read more...</a>
					}
					{
						visible && <p className="news__big-text">{bigText}</p>
					}
					
				</div>
			)
		}
	}
	
	Article.propTypes = {
		data: PropTypes.shape({
			author: PropTypes.string.isRequired,
			text: PropTypes.string.isRequired,
			bigText: PropTypes.string.isRequired
		})
	}
	
	class News extends React.Component {
		
		state = {
			counter: 0
		}
		
		handleTotalClick = () => {
			this.setState({ counter: ++this.state.counter })
		}
		
		renderNews = () => {
			const { data } = this.props
			let newsTemplate = null
			
			if (data.length) {
				newsTemplate = data.map(function(item){
					return <Article key={item.id} data={item} />
				})
			} else {
				newsTemplate = <p>Unfortunately, here are no news</p>
			}
			
			return newsTemplate
		}
		render() {
			const { data } = this.props
			
			return (
				<div className="news">
					{this.renderNews()}
					{
						data.length ? <strong onClick={this.handleTotalClick} className={'news__count'}>Total news: {data.length}</strong> : null
					}
					{
						data.length ? <p className={'counter'}>Total clicks: {this.state.counter}</p> : null
					}
				</div>
			);
		}
		
	}

	News.propTypes = {
		data: PropTypes.array.isRequired
	}
	
	const App = () => {
		return (
			<React.Fragment>
				<h3>News</h3>
				<News data={myNews}/>
			</React.Fragment>
		)
	}

	ReactDOM.render(
		
		<App />,
		document.getElementById('root')
	);
  
  </script>

</body>

</html>